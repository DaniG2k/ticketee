exit
State.find_by id: 145
state3
State.last
state3
state2
state1
exit
State.last
state3
state2
state1
exit
State.third
State.second
State.first
State.all
state3
state2
state1
state1.make_default!
state3
state2
state1
exit
state1
exit
state1
state1.make_default!
state3
state2
state1
exit
State.all.map {|s| s.default}
State.all
state3
state1
state1.make_default!
state3
exit
current
current.with_lock {current.update!(default: true)}
current = State.find_by id: state1.id
State.find_by id: state1.id
State.find_by_id current.id
current = State.find_by(id: id)
State.update_all(default: false)
state1
state1.make_default!
state1.make_default
state1
exit
state1
state1.make_default!
state3
state2
state1
exit
current
current.update!(default: true)
urrent.update!(default: true)
others
others.update_all(default: false)
others.empty?
others.emtpy?
current
others
exit
current.update! default: true
current
others
others.update_all(default: false)
others
exit
current
others
exit
state.default
state
state.make_default!
state
exit
ticket
state
exit
State
ticket.state
ticket
tiket
project
user
exit
State.where.not(id: id).lock(true).first
State.where(id: id)
State.where.not(id: id)
